{"version":3,"file":"watermark.min.js","sources":["../node_modules/tslib/tslib.es6.js","../src/watermark.ts"],"sourcesContent":["/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\r\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\r\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\r\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\r\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\r\n    var _, done = false;\r\n    for (var i = decorators.length - 1; i >= 0; i--) {\r\n        var context = {};\r\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\r\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\r\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\r\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\r\n        if (kind === \"accessor\") {\r\n            if (result === void 0) continue;\r\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\r\n            if (_ = accept(result.get)) descriptor.get = _;\r\n            if (_ = accept(result.set)) descriptor.set = _;\r\n            if (_ = accept(result.init)) initializers.unshift(_);\r\n        }\r\n        else if (_ = accept(result)) {\r\n            if (kind === \"field\") initializers.unshift(_);\r\n            else descriptor[key] = _;\r\n        }\r\n    }\r\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\r\n    done = true;\r\n};\r\n\r\nexport function __runInitializers(thisArg, initializers, value) {\r\n    var useValue = arguments.length > 2;\r\n    for (var i = 0; i < initializers.length; i++) {\r\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\r\n    }\r\n    return useValue ? value : void 0;\r\n};\r\n\r\nexport function __propKey(x) {\r\n    return typeof x === \"symbol\" ? x : \"\".concat(x);\r\n};\r\n\r\nexport function __setFunctionName(f, name, prefix) {\r\n    if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\r\n    return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\r\n};\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\r\n    return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = Object.create((typeof AsyncIterator === \"function\" ? AsyncIterator : Object).prototype), verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\r\n    function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nvar ownKeys = function(o) {\r\n    ownKeys = Object.getOwnPropertyNames || function (o) {\r\n        var ar = [];\r\n        for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\r\n        return ar;\r\n    };\r\n    return ownKeys(o);\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n\r\nexport function __addDisposableResource(env, value, async) {\r\n    if (value !== null && value !== void 0) {\r\n        if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\r\n        var dispose, inner;\r\n        if (async) {\r\n            if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\r\n            dispose = value[Symbol.asyncDispose];\r\n        }\r\n        if (dispose === void 0) {\r\n            if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\r\n            dispose = value[Symbol.dispose];\r\n            if (async) inner = dispose;\r\n        }\r\n        if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\r\n        if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\r\n        env.stack.push({ value: value, dispose: dispose, async: async });\r\n    }\r\n    else if (async) {\r\n        env.stack.push({ async: true });\r\n    }\r\n    return value;\r\n\r\n}\r\n\r\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n    var e = new Error(message);\r\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\r\n\r\nexport function __disposeResources(env) {\r\n    function fail(e) {\r\n        env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\r\n        env.hasError = true;\r\n    }\r\n    var r, s = 0;\r\n    function next() {\r\n        while (r = env.stack.pop()) {\r\n            try {\r\n                if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);\r\n                if (r.dispose) {\r\n                    var result = r.dispose.call(r.value);\r\n                    if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\r\n                }\r\n                else s |= 1;\r\n            }\r\n            catch (e) {\r\n                fail(e);\r\n            }\r\n        }\r\n        if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();\r\n        if (env.hasError) throw env.error;\r\n    }\r\n    return next();\r\n}\r\n\r\nexport function __rewriteRelativeImportExtension(path, preserveJsx) {\r\n    if (typeof path === \"string\" && /^\\.\\.?\\//.test(path)) {\r\n        return path.replace(/\\.(tsx)$|((?:\\.d)?)((?:\\.[^./]+?)?)\\.([cm]?)ts$/i, function (m, tsx, d, ext, cm) {\r\n            return tsx ? preserveJsx ? \".jsx\" : \".js\" : d && (!ext || !cm) ? m : (d + ext + \".\" + cm.toLowerCase() + \"js\");\r\n        });\r\n    }\r\n    return path;\r\n}\r\n\r\nexport default {\r\n    __extends: __extends,\r\n    __assign: __assign,\r\n    __rest: __rest,\r\n    __decorate: __decorate,\r\n    __param: __param,\r\n    __esDecorate: __esDecorate,\r\n    __runInitializers: __runInitializers,\r\n    __propKey: __propKey,\r\n    __setFunctionName: __setFunctionName,\r\n    __metadata: __metadata,\r\n    __awaiter: __awaiter,\r\n    __generator: __generator,\r\n    __createBinding: __createBinding,\r\n    __exportStar: __exportStar,\r\n    __values: __values,\r\n    __read: __read,\r\n    __spread: __spread,\r\n    __spreadArrays: __spreadArrays,\r\n    __spreadArray: __spreadArray,\r\n    __await: __await,\r\n    __asyncGenerator: __asyncGenerator,\r\n    __asyncDelegator: __asyncDelegator,\r\n    __asyncValues: __asyncValues,\r\n    __makeTemplateObject: __makeTemplateObject,\r\n    __importStar: __importStar,\r\n    __importDefault: __importDefault,\r\n    __classPrivateFieldGet: __classPrivateFieldGet,\r\n    __classPrivateFieldSet: __classPrivateFieldSet,\r\n    __classPrivateFieldIn: __classPrivateFieldIn,\r\n    __addDisposableResource: __addDisposableResource,\r\n    __disposeResources: __disposeResources,\r\n    __rewriteRelativeImportExtension: __rewriteRelativeImportExtension,\r\n};\r\n","/// <reference path=\"./watermark.d.ts\" />\r\n\r\n/**\r\n * 生成水印草图，svg会据此生成水印\r\n * @param {WaterMarkOptions} options 配置项\r\n * @returns {SketchOptions} sketch 信息\r\n */\r\nfunction draft(options:WaterMarkTypes.WaterMarkOptions):WaterMarkTypes.SketchOptions{\r\n    const {\r\n        content,\r\n        fontWeight,\r\n        fontSize,\r\n        fontFamily,\r\n        rotateDegree,\r\n        margin,\r\n        padding,\r\n        opacity,\r\n        needClip,\r\n        tuning,\r\n        degraded,\r\n    }=options\r\n\r\n    const fontStyle=[fontWeight,fontSize,fontFamily].join(' ')\r\n    const canvas = document.createElement('canvas'); // 创建canvas元素\r\n    const ctx:CanvasRenderingContext2D=canvas.getContext('2d')!;\r\n\r\n    function setTxtProp(txt:string):TextMetrics{\r\n        ctx.font=fontStyle;\r\n        ctx.fillStyle = 'red';\r\n        ctx.textAlign='start';\r\n        ctx.textBaseline = 'top';\r\n        return ctx.measureText(txt);\r\n    }\r\n    function txtDom(txt:string):{\r\n        actualBoundingBoxAscent:number\r\n        actualBoundingBoxLeft:number\r\n        actualBoundingBoxDescent:number\r\n        actualBoundingBoxRight:number\r\n    }{\r\n        // 为兼容老浏览器（如 chrome <= 75）\r\n        const dom=document.createElement('span')\r\n        dom.style.display='block';\r\n        dom.style.position='absolute';\r\n        dom.style.lineHeight='1'\r\n        dom.style.fontWeight=fontWeight\r\n        dom.style.fontSize=fontSize\r\n        dom.style.fontFamily=fontFamily\r\n        dom.innerText=txt\r\n        dom.style.visibility='hidden'\r\n        document.body.appendChild(dom)\r\n        const style=window.getComputedStyle(dom)\r\n        const size=JSON.parse(JSON.stringify({\r\n            actualBoundingBoxAscent:0,\r\n            actualBoundingBoxLeft:0,\r\n            actualBoundingBoxDescent:parseFloat(style.height),\r\n            actualBoundingBoxRight:parseFloat(style.width),\r\n        }))\r\n        document.body.removeChild(dom)\r\n        return size\r\n    }\r\n\r\n    let txtProp=null\r\n    if(degraded){\r\n        txtProp=txtDom(content!)\r\n    }else{\r\n        txtProp=setTxtProp(content!)\r\n    }\r\n    // console.log(txtProp)\r\n    // debugger\r\n    const contWidth:number=txtProp.actualBoundingBoxRight +txtProp.actualBoundingBoxLeft;\r\n    const contHeight:number=txtProp.actualBoundingBoxDescent +txtProp.actualBoundingBoxAscent;\r\n    const radius:number=Math.sqrt(Math.pow(contWidth/2,2)+Math.pow(contHeight/2,2)); //圆弧半径（依据文字中心点到最远距离，用勾股定理算出半径）\r\n    const maxRadius:number=radius+padding; // 带 padding 的半径\r\n    const contOffsetX:number=maxRadius-contWidth/2;\r\n    const contOffsetY:number=maxRadius-contHeight/2;\r\n    const txtX:number=-maxRadius+contOffsetX+txtProp.actualBoundingBoxLeft;\r\n    const txtY:number=-maxRadius+contOffsetY+txtProp.actualBoundingBoxAscent;\r\n    const originAxis:[\r\n        [number,number],\r\n        [number,number],\r\n        [number,number],\r\n        [number,number]\r\n    ]=[\r\n        [-contWidth/2,-contHeight/2], // 上左\r\n        [contWidth/2,-contHeight/2], // 上右\r\n        [contWidth/2,contHeight/2], // 下右\r\n        [-contWidth/2,contHeight/2] // 下左\r\n    ];\r\n    const radian:number=(rotateDegree??0)*Math.PI/180; // 旋转角度\r\n    const newAxis:[number,number][] = originAxis.map(axis=>{\r\n        // 获取旋转后的四点新坐标\r\n        return [\r\n            axis[0]*Math.cos(radian)-axis[1]*Math.sin(radian),\r\n            axis[0]*Math.sin(radian)+axis[1]*Math.cos(radian)\r\n        ]\r\n    });\r\n    const clipStartAxis:[number,number]=[\r\n        Math.min(...newAxis.map(axis=>axis[0]))-padding,\r\n        Math.min(...newAxis.map(axis=>axis[1]))-padding\r\n    ];\r\n    const clipSize=([\r\n        Math.max(...newAxis.map(axis=>axis[0]))+padding,\r\n        Math.max(...newAxis.map(axis=>axis[1]))+padding\r\n    ]).map((value)=>value*2) as [number,number];\r\n\r\n\r\n\r\n    if(tuning){\r\n        // 绘制调试层\r\n        (function tuningLayer(){\r\n            canvas.width = maxRadius*2+margin;\r\n            canvas.height = maxRadius*2+margin;\r\n\r\n            ctx.globalAlpha=opacity;\r\n            ctx.translate(maxRadius,maxRadius); // 为旋转设置轴心\r\n            // 旋转\r\n            ctx.rotate(radian);\r\n\r\n            // text\r\n            // console.log('text',txtX,txtY)\r\n            setTxtProp(content!);\r\n            ctx.fillText(content!,txtX,txtY);\r\n\r\n            // 辅助绘制：\r\n            ctx.fillStyle = 'rgba(0,0,0,0.2)';\r\n            // 文字背景\r\n            ctx.beginPath();\r\n            ctx.strokeRect(-maxRadius+contOffsetX,-maxRadius+contOffsetY,contWidth,contHeight);\r\n            ctx.closePath();\r\n\r\n            // 水平线\r\n            ctx.setLineDash([5,15])\r\n            ctx.beginPath();\r\n            ctx.moveTo(-maxRadius, 0);\r\n            ctx.lineTo(maxRadius, 0);\r\n            ctx.closePath();\r\n            ctx.stroke();\r\n            ctx.rotate(-radian);\r\n            ctx.setLineDash([])\r\n            \r\n            // 旋转轨道\r\n            ctx.beginPath();\r\n            ctx.arc(0, 0, maxRadius-padding, 0, Math.PI*2);\r\n            ctx.closePath();\r\n            ctx.stroke();\r\n            \r\n            // padding\r\n            ctx.beginPath();\r\n            ctx.arc(0, 0, maxRadius, 0, Math.PI*2);\r\n            ctx.closePath();\r\n            ctx.stroke();\r\n            \r\n            // 矩形区域坐标点\r\n            newAxis.forEach(axis=>{\r\n                ctx.fillStyle = 'red';\r\n                ctx.beginPath();\r\n                ctx.arc(axis[0], axis[1], 0, 0, Math.PI*2);\r\n                ctx.closePath();\r\n                ctx.fill();\r\n            })\r\n\r\n            // 标出裁切（needClip）区域\r\n            ctx.setLineDash([8,4])\r\n            ctx.beginPath();\r\n            ctx.strokeRect(...clipStartAxis,...clipSize);\r\n            ctx.closePath();\r\n            ctx.setLineDash([]);\r\n\r\n        })();\r\n    }\r\n\r\n    if(needClip){\r\n        // clip\r\n        // console.log('newAxis',newAxis,clipStartAxis,clipSize)\r\n        const imgCopy=ctx.getImageData(...clipStartAxis,...clipSize.map(value=>value+maxRadius) as [number,number]);\r\n\r\n        canvas.width = clipSize[0]+margin;\r\n        canvas.height = clipSize[1]+margin;\r\n        ctx.putImageData(imgCopy,...clipStartAxis.map(value=>value-(value+maxRadius)) as [number,number]);\r\n    }\r\n\r\n    if(tuning){\r\n        put(canvas.toDataURL('image/png'),{\r\n            ...options,\r\n            name:[options.name,'tuning'].join('-')\r\n        })\r\n    }\r\n\r\n    return {\r\n        width: canvas.width,\r\n        height: canvas.height,\r\n        contWidth,\r\n        contHeight,\r\n        txtProp,\r\n        fontStyle\r\n    }\r\n}\r\n\r\n/**\r\n * 生成svg水印本体\r\n * @param {WaterMarkTypes.SketchOptions} sketch 水印草图参数\r\n * @returns String 水印base64 dataURL\r\n */\r\nfunction svgDataURLGenerate(sketch:WaterMarkTypes.SketchOptions,options:WaterMarkTypes.WaterMarkOptions):string{\r\n    let dataURL=''\r\n    let {x,y}={\r\n        x:(sketch.width-options.margin)/2-sketch.contWidth/2,\r\n        y:(sketch.height-options.margin)/2-sketch.contHeight/2\r\n    }\r\n    const rotateParams=[\r\n        options.rotateDegree,\r\n        x+sketch.contWidth/2,\r\n        y+sketch.contHeight/2\r\n    ].join(',')\r\n    const svg=document.createElement('svg')\r\n    const text=document.createElement('text')\r\n\r\n    // <svg>\r\n    svg.setAttribute('xmlns','http://www.w3.org/2000/svg')\r\n    svg.setAttribute('width',`${sketch.width}`)\r\n    svg.setAttribute('height',`${sketch.height}`)\r\n    svg.setAttribute('viewBox',`0 0 ${sketch.width} ${sketch.height}`)\r\n    svg.setAttribute('version','1.1')\r\n\r\n    // <text>\r\n    text.innerText=options.content\r\n    text.style=[\r\n        `display: block`,\r\n        `pointer-events: none`,\r\n        `font:${sketch.fontStyle}`,\r\n        `fill:${options.fontColor}`,\r\n        'block-size: min-content',\r\n        'text-anchor: start',\r\n        'text-align: center',\r\n\r\n        'transform-origin: top left',\r\n        `dominant-baseline:${options.baseline}`,\r\n        `alignment-baseline:${options.baseline}`,\r\n    ].join('; ');\r\n    text.setAttribute('x',`${x+sketch.txtProp.actualBoundingBoxLeft}`)\r\n    text.setAttribute('y',`${y+sketch.txtProp.actualBoundingBoxAscent}`)\r\n    text.setAttribute('transform',`rotate(${rotateParams})`)\r\n    text.setAttribute('opacity',`${options.opacity}`)\r\n\r\n    if(options.tuning){\r\n        // svg画布区\r\n        const boxRect=document.createElement('rect')\r\n        boxRect.setAttribute('x','0')\r\n        boxRect.setAttribute('y','0')\r\n        boxRect.setAttribute('fill','rgba(0,255,0, 0.08)')\r\n        boxRect.setAttribute('width',`${sketch.width-options.margin}`)\r\n        boxRect.setAttribute('height',`${sketch.height-options.margin}`)\r\n        svg.append(boxRect)\r\n        \r\n        text.style.outline='1px dotted rgba(0, 0, 255, 0.25)'\r\n        \r\n        // 水印内容矩形框\r\n        const contRect=document.createElement('rect')\r\n        contRect.setAttribute('x',`${x}`)\r\n        contRect.setAttribute('y',`${y}`)\r\n        contRect.setAttribute('width',`${sketch.contWidth}`)\r\n        contRect.setAttribute('height',`${sketch.contHeight}`)\r\n        contRect.setAttribute('fill','rgba(255,255,0, 0.2)')\r\n        contRect.setAttribute('stroke','rgba(255,0,0, 0.25)')\r\n        contRect.setAttribute('transform',`rotate(${rotateParams})`)\r\n        svg.append(contRect)\r\n\r\n        // 水印内容中心点\r\n        const centralCircle=document.createElement('circle')\r\n        centralCircle.setAttribute('cx',`${x+sketch.contWidth/2}`)\r\n        centralCircle.setAttribute('cy',`${y+sketch.contHeight/2}`)\r\n        centralCircle.setAttribute('r','2.5')\r\n        centralCircle.setAttribute('fill','rgba(0,0,0, .5)')\r\n        svg.append(centralCircle)\r\n    }\r\n\r\n    svg.append(text)\r\n\r\n    let base64=null\r\n    \r\n    if(typeof TextEncoder==='undefined'){\r\n        const svgEncodeString=encodeURIComponent(svg.outerHTML).replace(/%([0-9A-F]{2})/g, function(match, p1) {\r\n            return String.fromCharCode(+('0x' + p1));\r\n        });\r\n        base64=window.btoa(svgEncodeString)\r\n    }else{\r\n        const encoder = new TextEncoder();\r\n        const svgutf8 = encoder.encode(svg.outerHTML);\r\n        base64=window.btoa(String.fromCharCode(...svgutf8))\r\n    }\r\n\r\n\r\n    \r\n    dataURL=`data:image/svg+xml;base64,${base64}`\r\n    // console.log('svgDataURLGenerate',sketch,svg,svgEncodeString,dataURL)\r\n    return dataURL\r\n}\r\n\r\n/**\r\n * 水印放置\r\n * @param {String} imgURL 水印内容，base64\r\n * @param {WaterMarkTypes.WaterMarkOptions} options 是否为调试模式\r\n */\r\nfunction put(imgURL:string,options:WaterMarkTypes.WaterMarkOptions):void{\r\n    let elem=null\r\n    let carrierElem=options.carrierElem;\r\n    // console.warn('put',elem)\r\n\r\n    // 明确水印载体元素\r\n    if(options.mode==='cover'){\r\n        // 如果是cover模式，会新建一个层，用来装载水印\r\n        elem=document.createElement('div')\r\n        elem.className=options.name??''\r\n        // 并以相对位置设置水印层覆盖在目标上的基础样式\r\n        elem.style=[\r\n            elem.style.cssText,\r\n            'pointer-events:none',\r\n            'position:absolute',\r\n            'top:0',\r\n            'left:0',\r\n            `z-index:${options.zIndex}`,\r\n            'width:100%',\r\n            'height:100%'\r\n        ].join('!important;');\r\n    }else{\r\n        // 如果是mat，水印是直接装载到目标的background上的\r\n        elem=carrierElem||document.body\r\n    };\r\n\r\n    // 水印载体内容\r\n    elem.style=[\r\n        elem.style.cssText,\r\n        '-webkit-print-color-adjust:exact',\r\n        'print-color-adjust:exact',\r\n        'color-adjust:exact',\r\n        `background-image:url(${imgURL})`, // 水印内容\r\n        `background-position:${options.position}`,\r\n        `background-repeat:${options.repeat}`,\r\n        `background-size:${options.size}`\r\n        \r\n    ].join('!important;');\r\n    \r\n    // cover模式下将水印层置入目标元素中\r\n    if(options.mode==='cover'){\r\n        carrierElem.style.position='relative';\r\n        carrierElem.append(elem);\r\n    }else{\r\n\r\n    }\r\n}\r\n\r\n/**\r\n * 水印\r\n * 支持草图调试的水印生成工具\r\n * @param {Object} options 配置项\r\n * @param {String} options.name 水印的名称，会影响 cover 模式下水印层元素的 class 命名\r\n * @param {HTMLElement} options.carrierElem 水印层载体，默认在根元素（body）下\r\n * @param {Number} options.zIndex 水印层 z-index，默认 1000000\r\n * @param {'mat'|'cover'} options.mode mat|cover，放置模式，默认 mat（cover模式下为确保水印覆盖到，请检查载体宽高，mat 模式下水印的打印是非强制的，可能丢失）\r\n * @param {String} options.content 水印文字内容\r\n * @param {String} options.url 水印资源，与 content 互斥\r\n * @param {String} options.fontFamily 字体名\r\n * @param {String} options.fontWeight 字体粗细\r\n * @param {String} options.fontSize 字体大小\r\n * @param {String} options.fontColor 字体颜色\r\n * @param {String} options.baseline 文本基线设置（svg text alignment-baseline）\r\n * @param {Number} options.rotateDegree 旋转角度\r\n * @param {String} options.size 水印尺寸（css background-size）\r\n * @param {Number} options.margin 水印之间的外间距\r\n * @param {Number} options.padding 水印之间的内间距\r\n * @param {Boolean} options.needClip 是否裁切掉空白\r\n * @param {String} options.position 水印铺设位置（css background-position）\r\n * @param {String} options.repeat 水印铺设方式（css background-repeat）\r\n * @param {Number} options.opacity 透明度，同时影响水印及调试层\r\n * @param {Boolean} options.tuning 调试模式开关，设为 true 会在水印下添加 canvas 画布生成的参照底图，能够观察到 margin、padding、rotateDegree、baseline 等参数的设置效果，方便调试。只支持在 cover 模式下开启。\r\n * @param {Boolean} options.degraded 降级处理，更好的兼容性。canvas 的 measureText 本身具有对文字更精确的捕获，但因为兼容性问题，低版本浏览器对它的特性支持不完全，只得以 HTML DOM 的 getComputedStyle 取代 canvas measureText 来完成基础绘制和尺寸的捕获。\r\n * @example\r\n * // 基本使用\r\n * const waterMark=new WaterMark({\r\n *     content:'水印文字',\r\n * })\r\n * waterMark.draw()\r\n */\r\nclass WaterMark implements WaterMarkClass {\r\n    options:WaterMarkTypes.WaterMarkOptions={\r\n        name:'2080code-watermark',\r\n        mode:'mat',\r\n        carrierElem:document.body,\r\n        zIndex:100000,\r\n        content:'watermark',\r\n        url:'',\r\n        fontWeight:'normal',\r\n        fontSize:'16px',\r\n        fontFamily:'Hei',\r\n        fontColor:'rgba(0,0,0,1)',\r\n        baseline:'hanging',\r\n        rotateDegree:0,\r\n        size:'auto',\r\n        margin:0,\r\n        padding:0,\r\n        position:'center center',\r\n        repeat:'repeat',\r\n        opacity:0.1,\r\n        needClip:true,\r\n        degraded:false,\r\n        tuning:false,\r\n    }\r\n    \r\n    constructor(options:WaterMarkTypes.WaterMarkOptions){\r\n        this.options={...this.options,...options}\r\n    }\r\n\r\n    #getFinalOptions(options:WaterMarkTypes.WaterMarkOptions):WaterMarkTypes.WaterMarkOptions{\r\n        return {...this.options,...options}\r\n    }\r\n\r\n    /**\r\n     * 获取 svg 格式的 dataURL，只有在配置了 content 时才会生成\r\n     * @param {WaterMarkTypes.WaterMarkOptions} options 配置项\r\n     * @returns {String} svg 数据 URL\r\n     */\r\n    getDataURL(options:WaterMarkTypes.WaterMarkOptions):string{\r\n\r\n        const finalOptions=this.#getFinalOptions(options)\r\n        if(finalOptions.content){\r\n            const sketch=draft(finalOptions)\r\n            return svgDataURLGenerate(sketch,finalOptions)\r\n        }else{\r\n            throw new Error('options.content is required')\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 绘制水印\r\n     * @param {WaterMarkTypes.WaterMarkOptions} options 配置项，覆盖实例\r\n     */\r\n    draw(options:WaterMarkTypes.WaterMarkOptions):void{\r\n        const finalOptions=this.#getFinalOptions(options)\r\n        \r\n        if(finalOptions.content){\r\n            const sketch=draft(finalOptions)\r\n            const svgDataURL=svgDataURLGenerate(sketch,finalOptions)\r\n            put(svgDataURL,finalOptions)\r\n        }else if(finalOptions.url){\r\n            put(finalOptions.url,finalOptions)\r\n        }else{\r\n            throw new Error('options.url or options.content is required')\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport {\r\n    WaterMark as default\r\n}\r\n"],"names":["__classPrivateFieldGet","receiver","state","kind","f","TypeError","has","call","value","get","draft","options","content","fontWeight","fontSize","fontFamily","rotateDegree","margin","padding","opacity","needClip","tuning","degraded","fontStyle","join","canvas","document","createElement","ctx","getContext","setTxtProp","txt","font","fillStyle","textAlign","textBaseline","measureText","txtProp","dom","style","display","position","lineHeight","innerText","visibility","body","appendChild","window","getComputedStyle","size","JSON","parse","stringify","actualBoundingBoxAscent","actualBoundingBoxLeft","actualBoundingBoxDescent","parseFloat","height","actualBoundingBoxRight","width","removeChild","txtDom","contWidth","contHeight","maxRadius","Math","sqrt","pow","contOffsetX","contOffsetY","txtX","txtY","originAxis","radian","PI","newAxis","map","axis","cos","sin","clipStartAxis","min","clipSize","max","globalAlpha","translate","rotate","fillText","beginPath","strokeRect","closePath","setLineDash","moveTo","lineTo","stroke","arc","forEach","fill","imgCopy","getImageData","putImageData","put","toDataURL","Object","assign","name","svgDataURLGenerate","sketch","dataURL","x","y","rotateParams","svg","text","setAttribute","fontColor","baseline","boxRect","append","outline","contRect","centralCircle","base64","TextEncoder","svgEncodeString","encodeURIComponent","outerHTML","replace","match","p1","String","fromCharCode","btoa","svgutf8","encode","imgURL","elem","carrierElem","mode","className","_a","cssText","zIndex","repeat","SuppressedError","this","constructor","url","getDataURL","finalOptions","_WaterMark_instances","_WaterMark_getFinalOptions","Error","draw"],"mappings":"yOA8RO,SAASA,EAAuBC,EAAUC,EAAOC,EAAMC,GAC1D,GAAa,MAATD,IAAiBC,EAAG,MAAM,IAAIC,UAAU,iDAC5C,GAAqB,mBAAVH,EAAuBD,IAAaC,IAAUE,GAAKF,EAAMI,IAAIL,GAAW,MAAM,IAAII,UAAU,4EACvG,MAAgB,MAATF,EAAeC,EAAa,MAATD,EAAeC,EAAEG,KAAKN,GAAYG,EAAIA,EAAEI,MAAQN,EAAMO,IAAIR,EACxF,SC3RA,SAASS,EAAMC,GACX,MAAMC,QACFA,EAAOC,WACPA,EAAUC,SACVA,EAAQC,WACRA,EAAUC,aACVA,EAAYC,OACZA,EAAMC,QACNA,EAAOC,QACPA,EAAOC,SACPA,EAAQC,OACRA,EAAMC,SACNA,GACFX,EAEIY,EAAU,CAACV,EAAWC,EAASC,GAAYS,KAAK,KAChDC,EAASC,SAASC,cAAc,UAChCC,EAA6BH,EAAOI,WAAW,MAErD,SAASC,EAAWC,GAKhB,OAJAH,EAAII,KAAKT,EACTK,EAAIK,UAAY,MAChBL,EAAIM,UAAU,QACdN,EAAIO,aAAe,MACZP,EAAIQ,YAAYL,EAC3B,CA6BA,IAAIM,EAAQ,KAERA,EADDf,EA7BH,SAAgBS,GAOZ,MAAMO,EAAIZ,SAASC,cAAc,QACjCW,EAAIC,MAAMC,QAAQ,QAClBF,EAAIC,MAAME,SAAS,WACnBH,EAAIC,MAAMG,WAAW,IACrBJ,EAAIC,MAAM1B,WAAWA,EACrByB,EAAIC,MAAMzB,SAASA,EACnBwB,EAAIC,MAAMxB,WAAWA,EACrBuB,EAAIK,UAAUZ,EACdO,EAAIC,MAAMK,WAAW,SACrBlB,SAASmB,KAAKC,YAAYR,GAC1B,MAAMC,EAAMQ,OAAOC,iBAAiBV,GAC9BW,EAAKC,KAAKC,MAAMD,KAAKE,UAAU,CACjCC,wBAAwB,EACxBC,sBAAsB,EACtBC,yBAAyBC,WAAWjB,EAAMkB,QAC1CC,uBAAuBF,WAAWjB,EAAMoB,UAG5C,OADAjC,SAASmB,KAAKe,YAAYtB,GACnBW,CACX,CAIYY,CAAOjD,GAEPkB,EAAWlB,GAIvB,MAAMkD,EAAiBzB,EAAQqB,uBAAwBrB,EAAQiB,sBACzDS,EAAkB1B,EAAQkB,yBAA0BlB,EAAQgB,wBAE5DW,EADcC,KAAKC,KAAKD,KAAKE,IAAIL,EAAU,EAAE,GAAGG,KAAKE,IAAIJ,EAAW,EAAE,IAC9C7C,EACxBkD,EAAmBJ,EAAUF,EAAU,EACvCO,EAAmBL,EAAUD,EAAW,EACxCO,GAAaN,EAAUI,EAAY/B,EAAQiB,sBAC3CiB,GAAaP,EAAUK,EAAYhC,EAAQgB,wBAC3CmB,EAKJ,CACE,EAAEV,EAAU,GAAGC,EAAW,GAC1B,CAACD,EAAU,GAAGC,EAAW,GACzB,CAACD,EAAU,EAAEC,EAAW,GACxB,EAAED,EAAU,EAAEC,EAAW,IAEvBU,GAAezD,QAAAA,EAAc,GAAGiD,KAAKS,GAAG,IACxCC,EAA4BH,EAAWI,IAAIC,GAEtC,CACHA,EAAK,GAAGZ,KAAKa,IAAIL,GAAQI,EAAK,GAAGZ,KAAKc,IAAIN,GAC1CI,EAAK,GAAGZ,KAAKc,IAAIN,GAAQI,EAAK,GAAGZ,KAAKa,IAAIL,KAG5CO,EAA8B,CAChCf,KAAKgB,OAAON,EAAQC,IAAIC,GAAMA,EAAK,KAAK3D,EACxC+C,KAAKgB,OAAON,EAAQC,IAAIC,GAAMA,EAAK,KAAK3D,GAEtCgE,EAAS,CACXjB,KAAKkB,OAAOR,EAAQC,IAAIC,GAAMA,EAAK,KAAK3D,EACxC+C,KAAKkB,OAAOR,EAAQC,IAAIC,GAAMA,EAAK,KAAK3D,GACzC0D,IAAKpE,GAAc,EAANA,GAoEhB,GAhEGa,IAGKI,EAAOkC,MAAkB,EAAVK,EAAY/C,EAC3BQ,EAAOgC,OAAmB,EAAVO,EAAY/C,EAE5BW,EAAIwD,YAAYjE,EAChBS,EAAIyD,UAAUrB,EAAUA,GAExBpC,EAAI0D,OAAOb,GAIX3C,EAAWlB,GACXgB,EAAI2D,SAAS3E,EAAS0D,EAAKC,GAG3B3C,EAAIK,UAAY,kBAEhBL,EAAI4D,YACJ5D,EAAI6D,YAAYzB,EAAUI,GAAaJ,EAAUK,EAAYP,EAAUC,GACvEnC,EAAI8D,YAGJ9D,EAAI+D,YAAY,CAAC,EAAE,KACnB/D,EAAI4D,YACJ5D,EAAIgE,QAAQ5B,EAAW,GACvBpC,EAAIiE,OAAO7B,EAAW,GACtBpC,EAAI8D,YACJ9D,EAAIkE,SACJlE,EAAI0D,QAAQb,GACZ7C,EAAI+D,YAAY,IAGhB/D,EAAI4D,YACJ5D,EAAImE,IAAI,EAAG,EAAG/B,EAAU9C,EAAS,EAAW,EAAR+C,KAAKS,IACzC9C,EAAI8D,YACJ9D,EAAIkE,SAGJlE,EAAI4D,YACJ5D,EAAImE,IAAI,EAAG,EAAG/B,EAAW,EAAW,EAARC,KAAKS,IACjC9C,EAAI8D,YACJ9D,EAAIkE,SAGJnB,EAAQqB,QAAQnB,IACZjD,EAAIK,UAAY,MAChBL,EAAI4D,YACJ5D,EAAImE,IAAIlB,EAAK,GAAIA,EAAK,GAAI,EAAG,EAAW,EAARZ,KAAKS,IACrC9C,EAAI8D,YACJ9D,EAAIqE,SAIRrE,EAAI+D,YAAY,CAAC,EAAE,IACnB/D,EAAI4D,YACJ5D,EAAI6D,cAAcT,KAAiBE,GACnCtD,EAAI8D,YACJ9D,EAAI+D,YAAY,KAKrBvE,EAAS,CAGR,MAAM8E,EAAQtE,EAAIuE,gBAAgBnB,KAAiBE,EAASN,IAAIpE,GAAOA,EAAMwD,IAE7EvC,EAAOkC,MAAQuB,EAAS,GAAGjE,EAC3BQ,EAAOgC,OAASyB,EAAS,GAAGjE,EAC5BW,EAAIwE,aAAaF,KAAWlB,EAAcJ,IAAIpE,GAAOA,GAAOA,EAAMwD,IACtE,CASA,OAPG3C,GACCgF,EAAI5E,EAAO6E,UAAU,aAAYC,OAAAC,OAAAD,OAAAC,OAAA,CAAA,EAC1B7F,GAAO,CACV8F,KAAK,CAAC9F,EAAQ8F,KAAK,UAAUjF,KAAK,QAInC,CACHmC,MAAOlC,EAAOkC,MACdF,OAAQhC,EAAOgC,OACfK,YACAC,aACA1B,UACAd,YAER,CAOA,SAASmF,EAAmBC,EAAoChG,GAC5D,IAAIiG,EAAQ,IACRC,EAACA,EAACC,EAACA,GAAG,CACND,GAAGF,EAAOhD,MAAMhD,EAAQM,QAAQ,EAAE0F,EAAO7C,UAAU,EACnDgD,GAAGH,EAAOlD,OAAO9C,EAAQM,QAAQ,EAAE0F,EAAO5C,WAAW,GAEzD,MAAMgD,EAAa,CACfpG,EAAQK,aACR6F,EAAEF,EAAO7C,UAAU,EACnBgD,EAAEH,EAAO5C,WAAW,GACtBvC,KAAK,KACDwF,EAAItF,SAASC,cAAc,OAC3BsF,EAAKvF,SAASC,cAAc,QA6BlC,GA1BAqF,EAAIE,aAAa,QAAQ,8BACzBF,EAAIE,aAAa,QAAQ,GAAGP,EAAOhD,SACnCqD,EAAIE,aAAa,SAAS,GAAGP,EAAOlD,UACpCuD,EAAIE,aAAa,UAAU,OAAOP,EAAOhD,SAASgD,EAAOlD,UACzDuD,EAAIE,aAAa,UAAU,OAG3BD,EAAKtE,UAAUhC,EAAQC,QACvBqG,EAAK1E,MAAM,CACP,iBACA,uBACA,QAAQoE,EAAOpF,YACf,QAAQZ,EAAQwG,YAChB,0BACA,qBACA,qBAEA,6BACA,qBAAqBxG,EAAQyG,WAC7B,sBAAsBzG,EAAQyG,YAChC5F,KAAK,MACPyF,EAAKC,aAAa,IAAI,GAAGL,EAAEF,EAAOtE,QAAQiB,yBAC1C2D,EAAKC,aAAa,IAAI,GAAGJ,EAAEH,EAAOtE,QAAQgB,2BAC1C4D,EAAKC,aAAa,YAAY,UAAUH,MACxCE,EAAKC,aAAa,UAAU,GAAGvG,EAAQQ,WAEpCR,EAAQU,OAAO,CAEd,MAAMgG,EAAQ3F,SAASC,cAAc,QACrC0F,EAAQH,aAAa,IAAI,KACzBG,EAAQH,aAAa,IAAI,KACzBG,EAAQH,aAAa,OAAO,uBAC5BG,EAAQH,aAAa,QAAQ,IAAGP,EAAOhD,MAAMhD,EAAQM,SACrDoG,EAAQH,aAAa,SAAS,IAAGP,EAAOlD,OAAO9C,EAAQM,SACvD+F,EAAIM,OAAOD,GAEXJ,EAAK1E,MAAMgF,QAAQ,mCAGnB,MAAMC,EAAS9F,SAASC,cAAc,QACtC6F,EAASN,aAAa,IAAI,GAAGL,KAC7BW,EAASN,aAAa,IAAI,GAAGJ,KAC7BU,EAASN,aAAa,QAAQ,GAAGP,EAAO7C,aACxC0D,EAASN,aAAa,SAAS,GAAGP,EAAO5C,cACzCyD,EAASN,aAAa,OAAO,wBAC7BM,EAASN,aAAa,SAAS,uBAC/BM,EAASN,aAAa,YAAY,UAAUH,MAC5CC,EAAIM,OAAOE,GAGX,MAAMC,EAAc/F,SAASC,cAAc,UAC3C8F,EAAcP,aAAa,KAAK,GAAGL,EAAEF,EAAO7C,UAAU,KACtD2D,EAAcP,aAAa,KAAK,GAAGJ,EAAEH,EAAO5C,WAAW,KACvD0D,EAAcP,aAAa,IAAI,OAC/BO,EAAcP,aAAa,OAAO,mBAClCF,EAAIM,OAAOG,EACf,CAEAT,EAAIM,OAAOL,GAEX,IAAIS,EAAO,KAEX,GAAwB,oBAAdC,YAA0B,CAChC,MAAMC,EAAgBC,mBAAmBb,EAAIc,WAAWC,QAAQ,kBAAmB,SAASC,EAAOC,GAC/F,OAAOC,OAAOC,eAAe,KAAOF,GACxC,GACAP,EAAO3E,OAAOqF,KAAKR,EACvB,KAAK,CACD,MACMS,GADU,IAAIV,aACIW,OAAOtB,EAAIc,WACnCJ,EAAO3E,OAAOqF,KAAKF,OAAOC,gBAAgBE,GAC9C,CAMA,OAFAzB,EAAQ,6BAA6Bc,IAE9Bd,CACX,CAOA,SAASP,EAAIkC,EAAc5H,SACvB,IAAI6H,EAAK,KACLC,EAAY9H,EAAQ8H,YAIN,UAAf9H,EAAQ+H,MAEPF,EAAK9G,SAASC,cAAc,OAC5B6G,EAAKG,UAAsB,QAAZC,EAAAjI,EAAQ8F,YAAI,IAAAmC,EAAAA,EAAE,GAE7BJ,EAAKjG,MAAM,CACPiG,EAAKjG,MAAMsG,QACX,sBACA,oBACA,QACA,SACA,WAAWlI,EAAQmI,SACnB,aACA,eACFtH,KAAK,gBAGPgH,EAAKC,GAAa/G,SAASmB,KAI/B2F,EAAKjG,MAAM,CACPiG,EAAKjG,MAAMsG,QACX,mCACA,2BACA,qBACA,wBAAwBN,KACxB,uBAAuB5H,EAAQ8B,WAC/B,qBAAqB9B,EAAQoI,SAC7B,mBAAmBpI,EAAQsC,QAE7BzB,KAAK,eAGW,UAAfb,EAAQ+H,OACPD,EAAYlG,MAAME,SAAS,WAC3BgG,EAAYnB,OAAOkB,GAI3B,CDrBkD,mBAApBQ,iBAAiCA,gDCoF1CrI,GACb,OAAA4F,OAAAC,OAAAD,OAAAC,OAAA,CAAA,EAAWyC,KAAKtI,SAAWA,EAC/B,EA/BJ,MAyBI,WAAAuI,CAAYvI,eAxBZsI,KAAAtI,QAAwC,CACpC8F,KAAK,qBACLiC,KAAK,MACLD,YAAY/G,SAASmB,KACrBiG,OAAO,IACPlI,QAAQ,YACRuI,IAAI,GACJtI,WAAW,SACXC,SAAS,OACTC,WAAW,MACXoG,UAAU,gBACVC,SAAS,UACTpG,aAAa,EACbiC,KAAK,OACLhC,OAAO,EACPC,QAAQ,EACRuB,SAAS,gBACTsG,OAAO,SACP5H,QAAQ,GACRC,UAAS,EACTE,UAAS,EACTD,QAAO,GAIP4H,KAAKtI,QAAO4F,OAAAC,OAAAD,OAAAC,OAAA,CAAA,EAAKyC,KAAKtI,SAAWA,EACrC,CAWA,UAAAyI,CAAWzI,GAEP,MAAM0I,EAAarJ,EAAAiJ,KAAIK,EAAA,IAAAC,QAAJN,KAAsBtI,GACzC,GAAG0I,EAAazI,QAAQ,CAEpB,OAAO8F,EADMhG,EAAM2I,GACcA,EACrC,CACI,MAAM,IAAIG,MAAM,8BAExB,CAMA,IAAAC,CAAK9I,GACD,MAAM0I,EAAarJ,EAAAiJ,KAAIK,EAAA,IAAAC,QAAJN,KAAsBtI,GAEzC,GAAG0I,EAAazI,QAAQ,CAGpByF,EADiBK,EADJhG,EAAM2I,GACwBA,GAC5BA,EACnB,KAAM,KAAGA,EAAaF,IAGlB,MAAM,IAAIK,MAAM,8CAFhBnD,EAAIgD,EAAaF,IAAIE,EAGzB,CACJ","x_google_ignoreList":[0]}